/*
 * File:   main.c
 * Author: brianda
 *
 * Created on 18 de marzo de 2023, 10:57 AM
 */

#include "xc.h"
#define FCY 4000000
#include <libpic30.h>

//int boton = 0;
int mostrar = 0;
int unidades = 0;
int decenas = 0;
//int led_comun = 0;
//int compr=0;
int unidades_m = 0;
int decenas_m = 0;

void main(void) {
    AD1PCFG = 0xFFFF;
    
    TRISA = 15;
    TRISB = 0;
    
//    in1 = TRISAbits.TRISA0;
//    in2 = TRISAbits.TRISA1;
//    boton = TRISAbits.TRISA2;
    
//    TRISAbits.TRISA0 = in1;
//    TRISAbits.TRISA1 = in2;
//    TRISAbits.TRISA2 = boton; 
////    
    
    while(1){
        if (PORTAbits.RA0 == 1){ 
            while(PORTAbits.RA0 == 1){
            };
            unidades++;
        }
        if (PORTAbits.RA1 == 1){
            while(PORTAbits.RA1 == 1){
            };
            unidades_m++;
        }
        if (unidades==10){
            unidades=0;
            decenas++;
        }
        if (unidades_m==10){
            unidades_m=0;
            decenas_m++;
        }
        if (PORTAbits.RA2 == 1){
            //boton=!boton;
            unidades_decenas(unidades,decenas);
        }
        else{
            //boton = boton;
            unidades_decenas(unidades_m,decenas_m);
        }
    }
   return 1;
}

void unidades_decenas(int unidades, int decenas){
    numeros_unidades(unidades);
    LATBbits.LATB10 = 1;
    LATBbits.LATB11 = 0;
    //__delay_ms(10);
    numeros_unidades(decenas);
    LATBbits.LATB10 = 0;
    LATBbits.LATB11 = 1;
    //__delay_ms(10);
    return unidades;
}

void numeros_unidades(int compr){
    if (compr == 0){
        PORTB=0b0111111;}
    if (compr == 1){
        PORTB=0b0000110;}
    if (compr == 2){
        PORTB=0b1011011;}
    if (compr == 3){
        PORTB=0b1001111;}
    if (compr == 4){
        PORTB=0b1100110;}
    if (compr == 5){
        PORTB=0b1101101;}
    if (compr == 6){
        PORTB=0b1111100;}
    if (compr == 7){
        PORTB=0b0000111;}
    if (compr == 8){
        PORTB=0b1111111;}
    if (compr == 9){
        PORTB=0b1100111;}   
    
}
